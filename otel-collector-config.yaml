# OpenTelemetry Collector Configuration
# Receives traces and fans them out to multiple destinations.
#
# Architecture:
#   App → Collector → Jaeger (local dev)
#                   → Your Custom Service (production)

receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

processors:
  batch:
    timeout: 5s
    send_batch_size: 1024

exporters:
  # ─── Exporter 1: Jaeger (always enabled) ───────────────────────
  otlp/jaeger:
    endpoint: jaeger:4317
    tls:
      insecure: true

  # ─── Exporter 2: Your Custom Service ───────────────────────────
  # Uncomment and configure to send traces to your own product.
  #
  # otlp/custom:
  #   endpoint: https://ingest.yourproduct.com:443
  #   headers:
  #     Authorization: "Bearer YOUR_API_KEY"
  #   tls:
  #     insecure: false

  # ─── Exporter 3: Honeycomb (example) ───────────────────────────
  # otlp/honeycomb:
  #   endpoint: api.honeycomb.io:443
  #   headers:
  #     x-honeycomb-team: YOUR_HONEYCOMB_API_KEY

  # ─── Exporter 4: Datadog (example) ────────────────────────────
  # otlp/datadog:
  #   endpoint: http://datadog-agent:4317
  #   tls:
  #     insecure: true

  # ─── Debug exporter (logs traces to stdout) ────────────────────
  debug:
    verbosity: basic

service:
  pipelines:
    traces:
      receivers: [otlp]
      processors: [batch]
      exporters:
        - otlp/jaeger        # Always export to Jaeger
        - debug               # Log trace IDs to collector stdout
        # - otlp/custom       # ← Uncomment to send to your service
        # - otlp/honeycomb    # ← Uncomment for Honeycomb
        # - otlp/datadog      # ← Uncomment for Datadog
